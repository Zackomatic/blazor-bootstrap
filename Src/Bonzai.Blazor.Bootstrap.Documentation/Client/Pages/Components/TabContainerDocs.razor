@using Microsoft.AspNetCore.Components.Web
@using Bonzai.Blazor.Bootstrap.Documentation.Client.Pages.Examples.TabContainer

@page "/components/tab-container"

@inherits DocsBase

<ComponentDoc Type="typeof(TabContainer)">
    <CustomDescription>
        A container to wrap individual <code>TabPane</code> components. Used to create a tabbed interface.
    </CustomDescription>
    <Properties>
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.ActiveTabIndex))">
            The id of the tab page that is currently active (shown). This value gets updated when a new tab is displayed.
        </ParamDescription>
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.ActiveTabIndexChanged))">
            An action to execute when the <PropertyReference Name="@nameof(TabContainer.ActiveTabIndex)" /> property changes.
        </ParamDescription>
        <AdditionalAttributes />
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.Content))">
            Use this render fragment when you want to disaply the tab pages in your own custom container. Using this fragment
            will not wrap your content in any container so make sure your <PropertyReference Name="@nameof(TabPane)" />s are
            wrapped in some kind of container element.
        </ParamDescription>
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.Fade))">
            Set to <code>true</code> to use fade in/out animations when switching tabs.
        </ParamDescription>
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.Panes))">
            Use this render fragment when you want to disaply the tab pages in a <code>div</code> with the <code>tab-content</code>
            class. Using this fragment automatically wraps the child content in a containing <code>div</code> so it is ok to add
            <PropertyReference Name="@nameof(TabPane)" /> to this component directly.
        </ParamDescription>
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.Pills))">
            Render the tabs as pills.
        </ParamDescription>
        <ParamDescription Property="typeof(TabContainer).GetProperty(nameof(TabContainer.Tabs))">
            Use this fragment when you want more control over how the tab links are displayed. When using this fragment you
            can obtain a reference to the <PropertyReference Name="@nameof(TabContainer)" /> by using a cascading parameter.
            The public constant <PropertyReference Name="@nameof(TabContainer.TabContainerParameterName)" /> is the name of
            the cascaded parameter.
        </ParamDescription>
    </Properties>
    <Methods>
        <MethodItem TSource="TabContainer"
                    MethodExpression="x => x.RegisterTab(default)">
            <Description>
                Registers the <PropertyReference Name="@nameof(TabPane)" /> with this container.
            </Description>
            <Parameters>
                <MethodParameterItem Name="tabPane" Type="typeof(TabPane)">
                    The <PropertyReference Name="@nameof(TabPane)" /> instance to register.
                </MethodParameterItem>
            </Parameters>
        </MethodItem>
        <MethodItem TSource="TabContainer"
                    MethodExpression="x => x.SetActiveTabAsync(default(TabPane))">
            <Description>
                Sets the <PropertyReference Name="@nameof(TabPane)" /> passed in as the active tab pane in this
                container. The active pane is the one that is displayed.
            </Description>
            <Parameters>
                <MethodParameterItem Name="tabPane" Type="typeof(TabPane)">
                    The <PropertyReference Name="@nameof(TabPane)" /> instance to make active.
                </MethodParameterItem>
            </Parameters>
        </MethodItem>
        <MethodItem TSource="TabContainer"
                    MethodExpression="x => x.SetActiveTabAsync(default(int))">
            <Description>
                Sets the <PropertyReference Name="@nameof(TabPane)" /> with the matching <code>TabPaneId</code> as the
                active tab in this container.
            </Description>
            <Parameters>
                <MethodParameterItem Name="tabPaneId" Type="typeof(string)">
                    The id of the <PropertyReference Name="@nameof(TabPane)" /> to make active.
                </MethodParameterItem>
            </Parameters>
        </MethodItem>
    </Methods>
</ComponentDoc>

<ExampleHeading />
<Example ExampleNumber="ExampleNumber">
    <Description>
        Add <PropertyReference Name="@nameof(TabPane)" /> components to the <PropertyReference Name="@nameof(TabContainer.Panes)" /> <code>RenderFragment</code> to
        generate a tab control
    </Description>
    <LiveExample>
        <Panes />
    </LiveExample>
    <Code>@(@"<TabContainer>
    <Panes>
        <TabPane Title=""Tab 1"">Content 1</TabPane>
        <TabPane Title=""Tab 2"">Content 2</TabPane>
        <TabPane Title=""Tab 3"">Content 3</TabPane>
        <TabPane Title=""Tab 4"">Content 4</TabPane>
        <TabPane Title=""Tab 5"">Content 5</TabPane>
        <TabPane Title=""Tab 6"">Content 6</TabPane>
    </Panes>
</TabContainer>

@code {

}")</Code>
</Example>

<Example ExampleNumber="ExampleNumber">
    <Description>
        Control the active tab programatically by binding to the <PropertyReference Name="@nameof(TabContainer.ActiveTabIndex)" />
    </Description>
    <LiveExample>
        <UpdateActiveTabId />
    </LiveExample>
    <Code>@(@"<Row>
    <Column>
        <Btn OnClick=""() => ActiveTabId = TabId1"">Display tab 1</Btn>
        <Btn OnClick=""() => ActiveTabId = TabId2"">Display tab 2</Btn>
        <Btn OnClick=""() => ActiveTabId = TabId2"">Display tab 2</Btn>
    </Column>
</Row>

<Row>
    <Column>
        <TabContainer @bind-ActiveTabId=""ActiveTabId"">
            <TabPane Title=""Tab 1"" Id=""@TabId1"">Content 1</TabPane>
            <TabPane Title=""Tab 2"" Id=""@TabId2"">Content 2</TabPane>
            <TabPane Title=""Tab 3"" Id=""@TabId3"">Content 3</TabPane>
        </TabContainer>
    </Column>
</Row>

@code {
    const string TabId1 = ""TabId1"";
    const string TabId2 = ""TabId2"";
    const string TabId3 = ""TabId3"";

    private string ActiveTabId { get; set; }
}
")</Code>
</Example>

<Example ExampleNumber="ExampleNumber">
    <Description>
        Preserve the state of the <PropertyReference Name="@nameof(TabContainer)" /> by binding to the <PropertyReference Name="@nameof(TabContainer.ActiveTabIndex)" />.
        This prevents the tab from being reset when the parent container needs to re-render.
    </Description>
    <LiveExample>
        <PreserveState />
    </LiveExample>
    <Code>@(@"<Row>
    <Column>
        Change tabs on each container below, then use this button to hide, and then recreate.
    </Column>
</Row>
<Row>
    <Column>
        <Btn OnClick=""DestroyComponents"">Recreate Component</Btn>
    </Column>
</Row>
<Row>
    <Column>
        <h6 class=""fw-bold mb-2"">Without binding to ActiveTabId</h6>
    </Column>
</Row>
<Row class=""mb-4"">
    <Column>
        @if(ShowComponents)
        {
            <TabContainer>
                <Panes>
                    <TabPane Title=""Tab 1"">Content 1</TabPane>
                    <TabPane Title=""Tab 2"">Content 2</TabPane>
                    <TabPane Title=""Tab 3"">Content 3</TabPane>
                </Panes>
            </TabContainer>
        }
    </Column>
</Row>
<Row>
    <Column>
        <h6 class=""fw-bold"">With binding to ActiveTabId</h6>
    </Column>
</Row>
<Row>
    <Column>
        @if(ShowComponents)
        {
            <TabContainer @bind-ActiveTabIndex=""ActiveTabIndex"">
                <Panes>
                    <TabPane Title=""Tab 1"">Content 1</TabPane>
                    <TabPane Title=""Tab 2"">Content 2</TabPane>
                    <TabPane Title=""Tab 3"">Content 3</TabPane>
                </Panes>
            </TabContainer>
        }
    </Column>
</Row>

@code {
    private int ActiveTabIndex { get; set; }

    private bool ShowComponents { get; set; } = true;

    private void DestroyComponents()
    {
        ShowComponents = false;
    }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);

        if(!ShowComponents)
        {
            ShowComponents = true;
            StateHasChanged();
        }
    }
}")</Code>
</Example>

<Example ExampleNumber="ExampleNumber">
    <Description>
        This is the same as the previous example, except now the <PropertyReference Name="@nameof(TabContainer)" /> is using the Fade animation.
        This is more or less an integration test for the devs creating this library.
    </Description>
    <LiveExample>
        <PreserveStateFade />
    </LiveExample>
    <Code>@(@"<Row>
    <Column>
        Change tabs on each container below, then use this button to hide, and then recreate.
    </Column>
</Row>
<Row>
    <Column>
        <Btn OnClick=""DestroyComponents"">Recreate Component</Btn>
    </Column>
</Row>
<Row>
    <Column>
        <h6 class=""fw-bold mb-2"">Without binding to ActiveTabId</h6>
    </Column>
</Row>
<Row class=""mb-4"">
    <Column>
        @if (ShowComponents)
        {
            <TabContainer Fade=""true"">
                <Panes>
                    <TabPane Title=""Tab 1"">Content 1</TabPane>
                    <TabPane Title=""Tab 2"">Content 2</TabPane>
                    <TabPane Title=""Tab 3"">Content 3</TabPane>
                </Panes>
            </TabContainer>
        }
    </Column>
</Row>
<Row>
    <Column>
        <h6 class=""fw-bold"">With binding to ActiveTabId</h6>
    </Column>
</Row>
<Row>
    <Column>
        @if (ShowComponents)
        {
            <TabContainer @bind-ActiveTabIndex=""ActiveTabIndex""
                          Fade=""true"">
                <Panes>
                    <TabPane Title=""Tab 1"">Content 1</TabPane>
                    <TabPane Title=""Tab 2"">Content 2</TabPane>
                    <TabPane Title=""Tab 3"">Content 3</TabPane>
                </Panes>
            </TabContainer>
        }
    </Column>
</Row>

@code {
    private int ActiveTabIndex { get; set; }

    private bool ShowComponents { get; set; } = true;

    private void DestroyComponents()
    {
        ShowComponents = false;
    }

    protected override void OnAfterRender(bool firstRender)
    {
        base.OnAfterRender(firstRender);

        if (!ShowComponents)
        {
            ShowComponents = true;
            StateHasChanged();
        }
    }
}")</Code>
</Example>

@code{
    
}